{"version":3,"file":"static/js/main.441c1936127809020d9c.js","mappings":"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","sources":["webpack://test-task-byndyusoft/./src/services/actions/calc-actions.ts","webpack://test-task-byndyusoft/./src/components/keyboard-button/keyboard-button.module.scss?eba2","webpack://test-task-byndyusoft/./src/components/keyboard-button/keyboard-button.tsx","webpack://test-task-byndyusoft/./src/components/keyboard/keyboard.module.scss?623d","webpack://test-task-byndyusoft/./src/consts/index.ts","webpack://test-task-byndyusoft/./src/utils/add-token-to-input.ts","webpack://test-task-byndyusoft/./src/components/calculator/calculator-context.ts","webpack://test-task-byndyusoft/./src/components/keyboard/keyboard.tsx","webpack://test-task-byndyusoft/./src/utils/execute.ts","webpack://test-task-byndyusoft/./src/utils/to-postfix.ts","webpack://test-task-byndyusoft/./src/components/output-section/output-section.module.scss?5ab1","webpack://test-task-byndyusoft/./src/components/output-section/output-section.tsx","webpack://test-task-byndyusoft/./src/services/reducers/calc-reducer.ts","webpack://test-task-byndyusoft/./src/components/calculator/calculator.module.scss?6b6d","webpack://test-task-byndyusoft/./src/components/calculator/calculator.tsx","webpack://test-task-byndyusoft/./src/components/app/app.modules.scss?45c4","webpack://test-task-byndyusoft/./src/components/app/app.tsx","webpack://test-task-byndyusoft/./src/index.tsx"],"sourcesContent":["import { TCalcState } from \"../reducers/calc-reducer\";\r\n\r\nexport const SAVE_FORM: \"SAVE_FORM\" = \"SAVE_FORM\";\r\nexport const CLEAR_CALC: \"CLEAR_CALC\" = \"CLEAR_CALC\";\r\nexport const UPDATE_INPUT: \"UPDATE_INPUT\" = \"UPDATE_INPUT\";\r\nexport const UPDATE_RESULT: \"UPDATE_RESULT\" = \"UPDATE_RESULT\";\r\n\r\nexport type TSaveForm = {\r\n  type: typeof SAVE_FORM;\r\n  form: TCalcState;\r\n}\r\n\r\nexport type TClearCalc = {\r\n  type: typeof CLEAR_CALC;\r\n}\r\n\r\nexport type TUpdateInput = {\r\n  type: typeof UPDATE_INPUT;\r\n  value: string;\r\n}\r\n\r\nexport type TUpdateResult = {\r\n  type: typeof UPDATE_RESULT;\r\n  value: string;\r\n}\r\n\r\nexport const saveForm = (form: TCalcState): TSaveForm => {\r\n  return {\r\n    type: SAVE_FORM,\r\n    form\r\n  };\r\n};\r\n\r\nexport const clearCalc = (): TClearCalc => {\r\n  return {\r\n    type: CLEAR_CALC\r\n  };\r\n};\r\n\r\nexport const updateInput = ( value: string ): TUpdateInput => {\r\n  return {\r\n    type: UPDATE_INPUT,\r\n    value\r\n  };\r\n};\r\n\r\nexport const updateResult = ( value: string ): TUpdateResult => {\r\n  return {\r\n    type: UPDATE_RESULT,\r\n    value\r\n  };\r\n};\r\n\r\nexport type TCalcActions = TSaveForm | TClearCalc | TUpdateInput | TUpdateResult; ","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"keyboard-button-module__wrapper--LoMrW\",\"equal\":\"keyboard-button-module__equal--eyjLK\"};","import { FC, MouseEvent } from 'react';\r\n\r\n// Styles\r\nimport styles from './keyboard-button.module.scss';\r\n\r\ntype TKeyboardButtonProps = {\r\n  value: string;\r\n  onClick?: (event: MouseEvent<HTMLDivElement>) => void;\r\n  equal?: boolean;\r\n}\r\n\r\nconst KeyboardButton:FC<TKeyboardButtonProps> = ({ value, onClick, equal }) => {\r\n  const className = `${styles.wrapper} ${equal ? styles.equal : ''}`;\r\n  return (\r\n    <div className={className} onClick={onClick}>\r\n      {value}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default KeyboardButton;","// extracted by mini-css-extract-plugin\nexport default {\"keyboard\":\"keyboard-module__keyboard--iTvXP\"};","export const operators = {\r\n  bracketOpen: {\r\n    output: \"(\",\r\n    token: \"(\",\r\n    priority: 0\r\n  },\r\n  bracketClose: {\r\n    output: \")\",\r\n    token: \")\",\r\n    priority: 0\r\n  },\r\n  plus: {\r\n    output: \"+\",\r\n    token: \"+\",\r\n    priority: 1\r\n  },\r\n  minus: {\r\n    output: \"-\",\r\n    token: \"-\",\r\n    priority: 1\r\n  },\r\n  multiplication: {\r\n    output: \"\\u00D7\",\r\n    token: \"*\",\r\n    priority: 2,\r\n  },\r\n  division: {\r\n    output: \"/\",\r\n    token: \"/\",\r\n    priority: 2\r\n  },\r\n  square: {\r\n    output: \"\\u221A\",\r\n    token: \"undefined\",\r\n    priority: 0\r\n  },\r\n  comma: {\r\n    output: \",\",\r\n    token: \",\",\r\n    priority: 10\r\n  },\r\n  percent: {\r\n    output: \"%\",\r\n    token: \"%\", \r\n    priority: 3\r\n  }\r\n};\r\n\r\n","import { operators } from \"../consts\";\r\n\r\n\r\n\r\nexport const addTokenToInput = (token: string, input: string, isCalculated: boolean): string => {\r\n  let returnString = '',\r\n    key: keyof typeof operators,\r\n    isLastOperator = false,\r\n    isCurrentOperator = false;\r\n  \r\n  for (key in operators) {\r\n    if( operators[key].output === input[input.length-1] && input[input.length-1] !== operators.bracketClose.output) isLastOperator = true;\r\n    if( operators[key].token === token ) {\r\n      isCurrentOperator = true;\r\n      if (key === 'multiplication') token = operators.multiplication.output;\r\n    }\r\n  }\r\n\r\n  if ( !input )  {\r\n    if ( isCurrentOperator ) input += '0';\r\n    if ( token === '00') token = '0';\r\n  }\r\n\r\n  if ( input === '0' && ( token === '00' || token === '0')) token = '';\r\n\r\n  if (isCalculated && isCurrentOperator) token = '0' + token;\r\n\r\n  if ( isLastOperator && isCurrentOperator ) returnString = `${input.slice(0, input.length-1)}${token}`;\r\n  else returnString = `${(isCalculated ? '' : input)}${token}`;\r\n\r\n  return returnString;\r\n};\r\n","import React from \"react\";\r\n\r\nexport type TCalcState = {\r\n  result: string;\r\n  input: string;\r\n  isCalculated: boolean;\r\n};\r\n\r\nexport const calcInitialState: TCalcState = {\r\n  result: '',\r\n  input: '',\r\n  isCalculated: false,\r\n};\r\n\r\nconst CalculatorContext = React.createContext<TCalcState>(calcInitialState);\r\n\r\nexport default  CalculatorContext;","import { useEffect, useRef, useState, FC, MouseEvent, useContext } from 'react';\r\nimport { clearCalc, updateInput, updateResult } from '../../services/actions/calc-actions';\r\nimport { TCalcActions } from '../../services/actions/calc-actions';\r\n\r\n// Components\r\nimport KeyboardButton from '../keyboard-button/keyboard-button';\r\n\r\n// Styles\r\nimport styles from './keyboard.module.scss';\r\n\r\n// Utils\r\nimport { toPostfix } from '../../utils/to-postfix';\r\nimport { execute } from '../../utils/execute';\r\n\r\n// Consts\r\nimport { operators } from '../../consts';\r\nimport { addTokenToInput } from '../../utils/add-token-to-input';\r\nimport CalculatorContext from '../calculator/calculator-context';\r\n\r\nconst checkMultiplication = (token: string | null): string => {\r\n  if (token === operators.multiplication.output) {\r\n    token = operators.multiplication.token;\r\n  } \r\n  return token ? token : '';\r\n};\r\n\r\ntype TKeyboardProps = {\r\n  dispatch: React.Dispatch<TCalcActions>;\r\n}\r\n\r\nconst Keyboard: FC<TKeyboardProps> = ({ dispatch }) => {\r\n  const \r\n    {input, isCalculated} = useContext(CalculatorContext),\r\n    [isKeyPressed, setIsKeyPressed] = useState(false),\r\n    keys = [\r\n      \"C\", \r\n      operators.square.output, \r\n      operators.percent.output, \r\n      operators.division.output, \r\n      \"7\", \r\n      \"8\", \r\n      \"9\", \r\n      operators.multiplication.output, \r\n      \"4\", \r\n      \"5\", \r\n      \"6\", \r\n      operators.minus.output, \r\n      \"1\", \r\n      \"2\", \r\n      \"3\", \r\n      operators.plus.output, \r\n      \"00\", \r\n      \"0\", \r\n      operators.comma.output, \r\n      \"=\"\r\n    ],\r\n    calcInputRef = useRef(input),\r\n    isKeyPressedRef = useRef(isKeyPressed),\r\n    isCalculatedRef = useRef(isCalculated);\r\n\r\n  const calculate = (infixStr: string ): string => {    \r\n    const postfixStrArray = toPostfix(infixStr);\r\n    const result = execute(postfixStrArray);\r\n\r\n    return result;\r\n  };\r\n\r\n  const onButtonClick = (e: MouseEvent<HTMLElement>) => {\r\n    const target = e.target as Element;\r\n    const token = checkMultiplication(target.textContent);\r\n\r\n    switch (token) {\r\n    case \"C\":\r\n      dispatch(clearCalc());\r\n      break;\r\n    case operators.square.output:\r\n      if ( !input ) dispatch(updateInput(`${token}(0)`));\r\n      else dispatch(updateInput(`${token}(${input})`));\r\n      break;\r\n    case \"=\":\r\n      dispatch(updateResult(calculate(input)));\r\n      break;\r\n    default:\r\n      if ( isCalculated ) dispatch(clearCalc());\r\n      dispatch(updateInput(addTokenToInput(token, input, isCalculated)));\r\n    } \r\n  };\r\n\r\n  const onKeyDown = (e: KeyboardEvent) => {\r\n    const input = calcInputRef.current;\r\n    if ( typeof input === 'string') {\r\n      if (e.key !== 'Shift') setIsKeyPressed(true);\r\n      if (!isKeyPressedRef.current) {\r\n        switch (e.key) {\r\n        case \"Enter\":\r\n          dispatch(updateResult(calculate(input)));\r\n          break;\r\n        case \"Escape\":\r\n          dispatch(clearCalc());\r\n          break;\r\n        case '0':\r\n        case '1':\r\n        case '2':\r\n        case '3':\r\n        case '4':\r\n        case '5':\r\n        case '6':\r\n        case '7':\r\n        case '8':\r\n        case '9':\r\n        case '+':\r\n        case '-':\r\n        case '/':\r\n        case '*':\r\n        case '%':\r\n          if ( isCalculatedRef.current ) dispatch(clearCalc());\r\n          \r\n          dispatch(updateInput(addTokenToInput(e.key, input, isCalculatedRef.current)));\r\n          break;\r\n        default:\r\n          if ( e.shiftKey && e.key === '%' ) {\r\n            dispatch(updateInput(addTokenToInput(e.key, input, isCalculatedRef.current)));\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const onKeyUp = () => {\r\n    setIsKeyPressed(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    calcInputRef.current = input;\r\n    isKeyPressedRef.current = isKeyPressed;\r\n    isCalculatedRef.current = isCalculated;\r\n\r\n  }, [input, isKeyPressed, isCalculated]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keydown', (e) => onKeyDown(e));\r\n    document.addEventListener('keyup', () => onKeyUp());\r\n    return () => {\r\n      document.removeEventListener('keydown', (e) => onKeyDown(e));\r\n      document.removeEventListener('keyup', () => onKeyUp());\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className={`${styles.keyboard}`} >\r\n      {keys.map((el, index) => {\r\n        if ( el === \"=\" ) return <KeyboardButton value={el} onClick={onButtonClick} key={index} equal />;\r\n        return <KeyboardButton value={el} onClick={onButtonClick} key={index}/>;\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Keyboard;","import { operators } from \"../consts\";\r\n\r\nexport const execute = (postfixStr: Array<string>) => {\r\n  const stack: Array<number> = [];\r\n\r\n  postfixStr.forEach((el, index) => {\r\n    const currentElAsNumber = Number.parseFloat(el);\r\n    if ( !isNaN(currentElAsNumber) ) {\r\n      stack.push(currentElAsNumber);\r\n    } else {\r\n      let temp = 0;\r\n      const first = stack[stack.length-2];\r\n      const second = stack[stack.length-1];\r\n      switch (el) {\r\n      case operators.plus.output:\r\n        temp = first + second;\r\n        break;\r\n      case operators.minus.output:\r\n        temp = first - second;\r\n        break;\r\n      case operators.multiplication.output:\r\n        temp = first * second;\r\n        break;\r\n      case operators.division.output:\r\n        temp = first / second;\r\n        break;\r\n      case operators.square.output:\r\n        temp = Math.sqrt(second);\r\n        break; \r\n      case operators.percent.output:\r\n        if ( postfixStr[index+1] === operators.plus.output || postfixStr[index+1] === operators.minus.output ) temp = first * second / 100;\r\n        if ( postfixStr[index+1] === operators.multiplication.output || postfixStr[index+1] === operators.division.output ) temp = second / 100;\r\n        break; \r\n      }\r\n      \r\n      el === operators.percent.output ? stack.splice(stack.length-1, 1) : stack.splice(stack.length-2, 2);\r\n      stack.push(temp);\r\n    }\r\n  });\r\n\r\n  const result = stack[0].toString().replace(/\\./, ',').slice(0,9);\r\n\r\n  return result;\r\n};\r\n","import { operators } from \"../consts\";\r\n\r\nexport const toPostfix = (input: string): Array<string> => {\r\n  let \r\n    numAsStr = '';\r\n  const \r\n    stack: Array<{output: string, token: string, priority: number}> = [],\r\n    postfixStr = [],\r\n    infixStr = input.split('');\r\n\r\n  infixStr.forEach(currentToken => {\r\n    if( !isNaN(+currentToken) ) {\r\n      numAsStr += currentToken;\r\n    } else if (currentToken === operators.comma.output) {\r\n      numAsStr += '.';\r\n    }  else if ( currentToken === operators.square.output) {\r\n      stack.push(operators.square);\r\n    } else if (currentToken === operators.bracketOpen.output ) {\r\n      stack.push(operators.bracketOpen);\r\n    } else /**/ {\r\n      if ( numAsStr !== '') {\r\n        postfixStr.push(numAsStr);\r\n        numAsStr = '';\r\n      }\r\n      const currentTokenWithPriority = Object.entries(operators).find(([, value]) => value.output === currentToken);\r\n      if (currentTokenWithPriority) {\r\n        if (stack.length) {\r\n          if(currentToken !== operators.bracketClose.token) {\r\n            if (stack[stack.length-1].priority >= currentTokenWithPriority[1].priority) {\r\n              postfixStr.push(stack[stack.length-1].output);\r\n              stack.pop();\r\n            } \r\n            stack.push(currentTokenWithPriority[1]);\r\n          } else {\r\n            let i = stack.length-1;\r\n            while (stack.length && stack[i].token !== operators.bracketOpen.token) {\r\n              if (stack[i].token !== operators.bracketOpen.token) postfixStr.push(stack[i].output);\r\n              stack.pop();\r\n              i--;\r\n            }\r\n            if( stack[i].token === operators.bracketOpen.token ) {\r\n              stack.pop();\r\n              postfixStr.push(stack[i-1].output);\r\n              stack.pop();\r\n            }\r\n          }\r\n        } else {\r\n          stack.push(currentTokenWithPriority[1]);\r\n        }\r\n\r\n        \r\n      }  else return 'Error';\r\n    }\r\n  });\r\n  if (numAsStr) postfixStr.push(numAsStr);\r\n  if (stack.length) {\r\n    stack.reverse().forEach(el => {\r\n      if(el.output !== operators.bracketClose.output) postfixStr.push(el.output);\r\n    });\r\n  }\r\n  return postfixStr;\r\n};","// extracted by mini-css-extract-plugin\nexport default {\"outputSection\":\"output-section-module__outputSection--G0AAQ\",\"output\":\"output-section-module__output--swxna\",\"result\":\"output-section-module__result--YDPBz\"};","import { FC, useContext } from \"react\";\r\nimport CalculatorContext from \"../calculator/calculator-context\";\r\n\r\n// Styles\r\nimport styles from './output-section.module.scss';\r\n\r\nconst OutputSection: FC = () => {\r\n  const { input, result } = useContext(CalculatorContext);\r\n\r\n  return (\r\n    <div className={`${styles.outputSection}`}>\r\n      <div className={`${styles.output}`} data-testid=\"input\">{input}</div>\r\n      <div className={`${styles.result}`} data-testid=\"result\">{result}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OutputSection;","import { UPDATE_INPUT, CLEAR_CALC, UPDATE_RESULT } from '../actions/calc-actions';\r\nimport { TCalcActions } from '../actions/calc-actions';\r\n\r\nexport type TCalcState = {\r\n  result: string;\r\n  input: string;\r\n  isCalculated: boolean;\r\n};\r\n\r\nexport const calcInitialState: TCalcState = {\r\n  result: '',\r\n  input: '',\r\n  isCalculated: false,\r\n};\r\n\r\nexport const calcReducer = (state = calcInitialState, action: TCalcActions): TCalcState => {\r\n  switch (action.type) {\r\n  case CLEAR_CALC: {\r\n    return calcInitialState;\r\n  }\r\n  case UPDATE_INPUT: {\r\n    return {\r\n      ...state,\r\n      input: action.value,\r\n    };\r\n  }\r\n  case UPDATE_RESULT: {\r\n    return {\r\n      ...state,\r\n      result: action.value,\r\n      isCalculated: true,\r\n    };\r\n  }\r\n  default: return state;\r\n  }\r\n};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"calculator-module__wrapper--x5tSn\"};","import { FC, useReducer } from \"react\";\r\nimport Keyboard from \"../keyboard/keyboard\";\r\nimport OutputSection from \"../output-section/output-section\";\r\nimport CalculatorContext, {calcInitialState} from './calculator-context';\r\nimport { calcReducer } from \"../../services/reducers/calc-reducer\";\r\n\r\n// Styles\r\nimport styles from './calculator.module.scss';\r\n\r\nconst Calculator: FC = () => {\r\n  const [calcState, dispatch] = useReducer(calcReducer, calcInitialState);\r\n  \r\n  return (\r\n    <CalculatorContext.Provider value={calcState}>\r\n      <div className={`${styles.wrapper}`}>\r\n        <OutputSection />\r\n        <Keyboard dispatch={dispatch} />\r\n      </div>\r\n    </CalculatorContext.Provider>\r\n  );\r\n};\r\n\r\nexport default Calculator;","// extracted by mini-css-extract-plugin\nexport default {\"calcOverlay\":\"app-modules__calcOverlay--UsPi_\"};","import { FC } from \"react\";\r\nimport Calculator from \"../calculator/calculator\";\r\n\r\n// styles\r\nimport styles from './app.modules.scss';\r\n\r\nconst App: FC = () => {\r\n  return (\r\n    <div className={`${styles.calcOverlay}`}>\r\n      <Calculator />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;","import { StrictMode } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app/app';\r\nimport './global-styles.scss';\r\n\r\nReactDOM.render(\r\n  <StrictMode>\r\n    <App />\r\n  </StrictMode>, \r\n  document.getElementById('root')\r\n);"],"names":["CLEAR_CALC","UPDATE_INPUT","UPDATE_RESULT","clearCalc","type","updateInput","value","updateResult","onClick","equal","className","operators","bracketOpen","output","token","priority","bracketClose","plus","minus","multiplication","division","square","comma","percent","addTokenToInput","input","isCalculated","key","isLastOperator","isCurrentOperator","length","slice","calcInitialState","result","dispatch","useContext","useState","isKeyPressed","setIsKeyPressed","keys","calcInputRef","useRef","isKeyPressedRef","isCalculatedRef","calculate","infixStr","postfixStr","stack","postfixStrArray","numAsStr","split","forEach","currentToken","isNaN","push","currentTokenWithPriority","Object","entries","find","pop","i","reverse","el","toPostfix","index","currentElAsNumber","Number","parseFloat","temp","first","second","Math","sqrt","splice","toString","replace","onButtonClick","e","checkMultiplication","target","textContent","onKeyDown","current","shiftKey","onKeyUp","useEffect","document","addEventListener","removeEventListener","map","calcReducer","state","action","useReducer","calcState","StrictMode","getElementById"],"sourceRoot":""}