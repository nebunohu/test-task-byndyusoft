"use strict";(self.webpackChunktest_task_byndyusoft=self.webpackChunktest_task_byndyusoft||[]).push([[179],{893:(t,e,n)=>{var u=n(557),r=n(526),o=n(961),c=n(648),a=n(118),i=n(441),s=(n(274),c.v9),p="CLEAR_CALC",l="UPDATE_INPUT",f="UPDATE_RESULT",h=function(){return{type:p}},v=function(t){return{type:l,value:t}},k=function(t){return{type:f,value:t}};const d="keyboard-button-module__wrapper--LoMrW",y="keyboard-button-module__equal--eyjLK";var b=function(){return b=Object.assign||function(t){for(var e,n=1,u=arguments.length;n<u;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},b.apply(this,arguments)};const m=function(t){var e=t.value,n=t.onClick,r=t.equal,o="".concat(d," ").concat(r?y:"");return(0,u.jsx)("div",b({className:o,onClick:n},{children:e}))},g="keyboard-module__keyboard--iTvXP";var j={bracketOpen:{output:"(",token:"(",priority:0},bracketClose:{output:")",token:")",priority:0},plus:{output:"+",token:"+",priority:1},minus:{output:"-",token:"-",priority:1},multiplication:{output:"×",token:"*",priority:2},division:{output:"/",token:"/",priority:2},square:{output:"√",token:"undefined",priority:0},comma:{output:",",token:",",priority:10},percent:{output:"%",token:"%",priority:3}},O=function(t,e,n){var u,r=!1,o=!1;for(u in j)j[u].output===e[e.length-1]&&e[e.length-1]!==j.bracketClose.output&&(r=!0),j[u].token===t&&(o=!0,"multiplication"===u&&(t=j.multiplication.output));return e||(o&&(e+="0"),"00"===t&&(t="0")),"0"!==e||"00"!==t&&"0"!==t||(t=""),n&&o&&(t="0"+t),r&&o?"".concat(e.slice(0,e.length-1)).concat(t):"".concat(n?"":e).concat(t)},_=function(){return _=Object.assign||function(t){for(var e,n=1,u=arguments.length;n<u;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},_.apply(this,arguments)};const C=function(){var t=(0,r.useState)(!1),e=t[0],n=t[1],o=["C",j.square.output,j.percent.output,j.division.output,"7","8","9",j.multiplication.output,"4","5","6",j.minus.output,"1","2","3",j.plus.output,"00","0",j.comma.output,"="],a=s((function(t){return t.calc})),i=a.input,p=a.isCalculated,l=(0,c.I0)(),f=(0,r.useRef)(i),d=(0,r.useRef)(e),y=(0,r.useRef)(p),b=function(t){var e,n,u=function(t){var e="",n=[],u=[];return t.split("").forEach((function(t){if(isNaN(+t))if(t===j.comma.output)e+=".";else if(t===j.square.output)n.push(j.square);else if(t===j.bracketOpen.output)n.push(j.bracketOpen);else{""!==e&&(u.push(e),e="");var r=Object.entries(j).find((function(e){return e[1].output===t}));if(!r)return"Error";if(n.length)if(t!==j.bracketClose.token)n[n.length-1].priority>=r[1].priority&&(u.push(n[n.length-1].output),n.pop()),n.push(r[1]);else{for(var o=n.length-1;n.length&&n[o].token!==j.bracketOpen.token;)n[o].token!==j.bracketOpen.token&&u.push(n[o].output),n.pop(),o--;n[o].token===j.bracketOpen.token&&(n.pop(),u.push(n[o-1].output),n.pop())}else n.push(r[1])}else e+=t})),e&&u.push(e),n.length&&n.reverse().forEach((function(t){t.output!==j.bracketClose.output&&u.push(t.output)})),u}(t);return n=[],(e=u).forEach((function(t,u){var r=Number.parseFloat(t);if(isNaN(r)){var o=0,c=n[n.length-2],a=n[n.length-1];switch(t){case j.plus.output:o=c+a;break;case j.minus.output:o=c-a;break;case j.multiplication.output:o=c*a;break;case j.division.output:o=c/a;break;case j.square.output:o=Math.sqrt(a);break;case j.percent.output:e[u+1]!==j.plus.output&&e[u+1]!==j.minus.output||(o=c*a/100),e[u+1]!==j.multiplication.output&&e[u+1]!==j.division.output||(o=a/100)}t===j.percent.output?n.splice(n.length-1,1):n.splice(n.length-2,2),n.push(o)}else n.push(r)})),n[0].toString().replace(/\./,",").slice(0,9)},C=function(t){var e=function(t){return t===j.multiplication.output&&(t=j.multiplication.token),t||""}(t.target.textContent);switch(e){case"C":l(h());break;case j.square.output:l(v(i?"".concat(e,"(").concat(i,")"):"".concat(e,"(0)")));break;case"=":l(k(b(i)));break;default:p&&l(h()),l(v(O(e,i,p)))}},w=function(t){var e=f.current;if("string"==typeof e&&("Shift"!==t.key&&n(!0),!d.current))switch(t.key){case"Enter":l(k(b(e)));break;case"Escape":l(h());break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":case"/":case"*":case"%":y.current&&l(h()),l(v(O(t.key,e,y.current)));break;default:t.shiftKey&&"%"===t.key&&l(v(O(t.key,e,y.current)))}},x=function(){n(!1)};return(0,r.useEffect)((function(){f.current=i,d.current=e,y.current=p}),[i,e,p]),(0,r.useEffect)((function(){return document.addEventListener("keydown",(function(t){return w(t)})),document.addEventListener("keyup",(function(){return x()})),function(){document.removeEventListener("keydown",(function(t){return w(t)})),document.removeEventListener("keyup",(function(){return x()}))}}),[]),(0,u.jsx)("div",_({className:"".concat(g)},{children:o.map((function(t,e){return"="===t?(0,u.jsx)(m,{value:t,onClick:C,equal:!0},e):(0,u.jsx)(m,{value:t,onClick:C},e)}))}))},w="output-section-module__outputSection--G0AAQ",x="output-section-module__output--swxna",E="output-section-module__result--YDPBz";var N=function(){return N=Object.assign||function(t){for(var e,n=1,u=arguments.length;n<u;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},N.apply(this,arguments)};const P=function(t){var e=t.inputValue,n=t.result;return(0,u.jsxs)("div",N({className:"".concat(w)},{children:[(0,u.jsx)("div",N({className:"".concat(x)},{children:e})),(0,u.jsx)("div",N({className:"".concat(E)},{children:n}))]}))},q="calculator-module__wrapper--x5tSn";var L=function(){return L=Object.assign||function(t){for(var e,n=1,u=arguments.length;n<u;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},L.apply(this,arguments)};const S=function(){var t=s((function(t){return t.calc})),e=t.result,n=t.input;return(0,u.jsxs)("div",L({className:"".concat(q)},{children:[(0,u.jsx)(P,{inputValue:n,result:e}),(0,u.jsx)(C,{})]}))},A="app-modules__calcOverlay--UsPi_";var T=function(){return T=Object.assign||function(t){for(var e,n=1,u=arguments.length;n<u;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},T.apply(this,arguments)};const U=function(){return(0,u.jsx)("div",T({className:"".concat(A)},{children:(0,u.jsx)(S,{})}))};var R=function(){return R=Object.assign||function(t){for(var e,n=1,u=arguments.length;n<u;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},R.apply(this,arguments)},M={result:"",input:"",isCalculated:!1},D=(0,a.UY)({calc:function(t,e){switch(void 0===t&&(t=M),e.type){case p:return M;case l:return R(R({},t),{input:e.value});case f:return R(R({},t),{result:e.value,isCalculated:!0});default:return t}}}),I=function(){return I=Object.assign||function(t){for(var e,n=1,u=arguments.length;n<u;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},I.apply(this,arguments)},z=(0,a.qC)((0,a.md)(i.Z)),B=(0,a.MT)(D,z);o.render((0,u.jsx)(r.StrictMode,{children:(0,u.jsx)(c.zt,I({store:B},{children:(0,u.jsx)(U,{})}))}),document.getElementById("root"))}},t=>{t.O(0,[216],(()=>{return e=893,t(t.s=e);var e}));t.O()}]);
//# sourceMappingURL=main.4660d53c92ebb383d652.js.map